# SonarQube / SonarCloud 專案設定
# Free-CRM - ISO 27001 程式碼品質管理
#
# 設定說明：
# - SonarCloud: 需設定 sonar.organization（從 sonarcloud.io 取得）
# - SonarQube: 不需要 organization，僅需 projectKey

# 專案識別
sonar.projectKey=beckyeh8888_free-crm
sonar.organization=beckyeh8888
sonar.projectName=Free-CRM
sonar.projectVersion=0.1.0

# 原始碼設定
sonar.sources=src
sonar.tests=tests
sonar.sourceEncoding=UTF-8

# TypeScript/JavaScript 設定
sonar.typescript.tsconfigPath=tsconfig.json
sonar.javascript.lcov.reportPaths=coverage/lcov.info

# 排除檔案
sonar.exclusions=\
  **/node_modules/**,\
  **/*.test.ts,\
  **/*.test.tsx,\
  **/*.spec.ts,\
  **/*.spec.tsx,\
  **/coverage/**,\
  **/.next/**,\
  **/storybook-static/**,\
  **/*.stories.tsx,\
  **/prisma/migrations/**

# 測試檔案排除 (不計入覆蓋率)
sonar.test.exclusions=\
  **/tests/**,\
  **/*.test.ts,\
  **/*.test.tsx,\
  **/*.spec.ts,\
  **/*.spec.tsx,\
  **/*.stories.tsx

# 覆蓋率排除 (第三方生成檔案)
sonar.coverage.exclusions=\
  **/node_modules/**,\
  **/.next/**,\
  **/prisma/migrations/**,\
  **/*.config.ts,\
  **/*.config.js,\
  **/*.d.ts

# 品質門檻 (Quality Gate)
# 這些由 SonarCloud 專案設定控制，此處為參考
# - 覆蓋率 >= 80%
# - 重複程式碼 <= 3%
# - 可維護性評級 A
# - 可靠性評級 A
# - 安全性評級 A

# 忽略 Tailwind CSS 4 @source 語法的誤報
sonar.issue.ignore.multicriteria=tailwindSource
sonar.issue.ignore.multicriteria.tailwindSource.ruleKey=css:S4662
sonar.issue.ignore.multicriteria.tailwindSource.resourceKey=src/app/globals.css

# 安全熱點審查
sonar.security.hotspots.inheritedRulesDisabled=false

# 分支分析
sonar.branch.name=${GITHUB_REF_NAME}
